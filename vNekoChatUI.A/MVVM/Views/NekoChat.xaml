<UserControl x:Class="vNekoChatUI.A.MVVM.Views.NekoChat"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:v="clr-namespace:vNekoChatUI.A.MVVM.Views"
             xmlns:vm="clr-namespace:vNekoChatUI.A.MVVM.ViewModels"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors" 
             xmlns:listviewcontactsex="clr-namespace:vNekoChatUI.A.CustomControlEx.ListViewContactsEx"
             xmlns:emptybuttonex="clr-namespace:vNekoChatUI.A.CustomControlEx.EmptyButtonEx" 
             xmlns:radiobuttonex="clr-namespace:vNekoChatUI.A.CustomControlEx.RadioButtonEx" 
             xmlns:configbuttonex="clr-namespace:vNekoChatUI.A.CustomControlEx.ConfigButtonEx" 
             xmlns:consolelistviewex="clr-namespace:vNekoChatUI.A.CustomControlEx.ConsoleListViewEx"
             xmlns:suggestionmenuitemex="clr-namespace:vNekoChatUI.A.CustomControlEx.SuggestionMenuItemEx" 
             xmlns:stepprogressindicatorex="clr-namespace:vNekoChatUI.A.CustomControlEx.StepProgressIndicatorEx" 
             xmlns:converters="clr-namespace:vNekoChatUI.A.MVVM.Converters" 
             xmlns:inputboxex="clr-namespace:vNekoChatUI.A.CustomControlEx.InputBoxEx"
             xmlns:alertpanelex="clr-namespace:TrarsUI.Shared.Controls.AlertPanelEx;assembly=TrarsUI.Shared"
             mc:Ignorable="d" 
             TextOptions.TextFormattingMode="Display"
             TextOptions.TextRenderingMode="ClearType"
             UseLayoutRounding="true"
             d:DesignHeight="480" d:DesignWidth="660">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <converters:NekoChat_converter_selectedcontact_title x:Key="NekoChat_converter_selectedcontact_title"/>
            <converters:NekoChat_converter_chatmode_isenabled x:Key="NekoChat_converter_chatmode_isenabled"/>
        </ResourceDictionary>
    </UserControl.Resources>
    <d:UserControl.DataContext>
        <vm:NekoChatVM/>
    </d:UserControl.DataContext>

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadedCommand}"
                                   CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="180"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!--左-->
        <Grid Grid.Column="0" Background="#202123">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition />
                <RowDefinition Height="60"/>
            </Grid.RowDefinitions>

            <!--左上-->
            <Border Background="Transparent" >
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Left"
                                Margin="4"
                                Grid.Column="0">
                        <!--添加人物-->
                        <emptybuttonex:cEmptyButton Command="{Binding AddBotCommand}"
                                                    Width="28" Height="28"
                                                    BorderMouseOverColor="DimGray"
                                                    BorderPathData="M760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m112 216a4 4 0 0 1-4 4h-80v80a4 4 0 0 1-4 4h-48a4 4 0 0 1-4-4v-80h-80a4 4 0 0 1-4-4v-48a4 4 0 0 1 4-4h80v-80a4 4 0 0 1 4-4h48a4 4 0 0 1 4 4v80h80a4 4 0 0 1 4 4zM512 563.5c133.7 0 242-108.3 242-242s-108.3-242-242-242-242 108.3-242 242 108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 643.8 128 770.2 128 915.5v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75z"
                                                    Margin="1">
                        </emptybuttonex:cEmptyButton>
                        <!--切换人设-->
                        <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                    BorderMouseOverColor="DimGray"
                                                    BorderPathData="M980.949037 530.566288c-10.860076 52.126224-26.368832 98.918742-46.840014 140.378222-69.787059 141.334182-189.054562 215.486946-357.791136 222.327175-80.031013 3.14684-155.557844-7.24897-226.744391-31.058319v-0.956628l-31.481778 73.469745c-6.331811 11.652807-11.511654 15.436507-18.373289 20.125994-5.413314 3.700079-14.85584 6.258224-21.184307 6.912478-6.466943 0.668971-11.14974 0.222767-19.622927-2.229681-6.703759-1.940685-9.492699-5.052069-11.818712-6.68971-2.325343-1.644331-7.67845-7.690491-8.919391-8.919391L79.092447 693.519607c-4.029213-6.841567-6.354556-13.408856-7.134576-19.841681-0.771993-6.29368-0.310403-11.630731 1.090422-16.007808 1.392798-4.37574 3.71881-8.483891 7.134577-12.312413a78.55058 78.55058 0 0 1 10.231912-9.440519c3.414428-2.598953 7.133907-4.650687 11.16914-6.567289 4.029213-1.916602 6.823505-3.011708 8.065115-3.285985 1.394136-0.273609 2.325343-0.68235 3.098005-1.36537l278.546164-68.683258c14.889289-3.14684 29.13971-4.187759 37.982838-2.544765 8.839114 1.642993 10.767758 2.185528 16.501509 4.236593 5.74111 2.190211 12.264246 7.581449 15.150187 12.945259 2.758168 5.126994 3.877356 9.853275 4.657376 13.682465 0.771993 3.833204 0.771993 8.210282 0 13.133908-0.779351 4.924965-1.400156 8.345414-2.020961 9.854613-0.773331 1.637641-1.083733 2.597615-1.083733 3.280634l-32.570193 73.475766c57.697415 19.562051 111.97438 31.602192 163.15401 36.256892 51.185651 4.650687 94.761087 3.555581 130.589838-3.285986s69.324131-18.198688 100.184434-33.932887c30.866993-15.732861 55.216201-31.331928 73.208847-46.652703 17.987293-15.325458 34.117523-32.288556 48.233481-50.901338 14.266477-18.606092 23.105591-31.327245 26.983616-38.168143 3.722824-6.705766 6.668972-12.452227 8.684582-16.829304zM48.542546 487.902659c14.889289-61.569419 35.828751-115.612245 62.969576-162.131153C189.521504 195.795115 313.12996 132.313107 482.639864 135.459947c75.222449 1.230238 143.615373 13.408856 205.343339 36.799428l33.496718-72.508433c4.707549-7.897872 9.581672-13.355338 14.853833-17.458807 5.429369-4.107482 10.894193-5.663509 15.543542-6.62482 4.808564-0.956629 9.900103-1.392129 14.866544-0.705765 5.112946 0.68235 7.442303 1.003457 11.73509 2.425021 3.865315 1.280411 4.692163 1.460364 8.417662 3.512098 3.71881 2.19088 7.107817 4.738322 10.536294 8.083177l6.243507 7.358681 150.592741 249.407792c3.413759 7.522579 5.429369 14.364146 6.050174 20.796303 0.778013 6.29368 0.310403 11.630731-1.083733 16.007808-1.392798 4.37574-3.877356 8.483891-7.602187 12.178618-3.720148 3.827852-7.285764 6.841567-10.70153 8.892632a86.290575 86.290575 0 0 1-11.163119 6.153196l-8.065115 3.833204c-1.394136 0.68235-2.325343 0.956629-3.104026 0.956629l-280.561105 62.253107c-19.075709 2.597615-34.26938 2.190211-45.748923-0.956628-11.47486-3.14684-19.273725-10.712233-22.530944-16.049954-3.408407-5.332368-4.844688-8.837108-5.463487-16.334266-0.541198-6.557254-0.111049-9.56361 0.668971-12.71045 0.771993-3.14684 2.66585-8.539415 4.059985-10.456017l34.585803-72.515123c-56.919401-20.657826-111.043842-33.931549-162.691082-39.537527-51.490032-5.611329-95.067475-5.611329-130.583817 0-35.518349 5.605977-69.172275 16.00647-100.654052 31.058319-31.481777 15.046497-56.457142 30.098345-74.754839 45.284657-18.303048 15.185643-34.895537 31.740669-49.784825 49.939357-14.889289 18.19735-24.347201 30.78471-28.535629 37.626276-3.875349 6.702421-6.668972 12.040141-8.063108 15.734199z m0-13.380089"
                                                    Margin="1">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Click">
                                    <i:InvokeCommandAction Command="{Binding ProfileRefreshCommand}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </emptybuttonex:cEmptyButton>
                        <!--载入默认人设-->
                        <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                    BorderMouseOverColor="DimGray"
                                                    BorderPathData="M0.350994 394.703527C13.419637 552.061414 137.435139 690.573071 490.226091 942.296163c6.387477 4.556783 13.916964 6.961552 21.76163 6.961552 7.816013 0 15.32401-2.406816 21.688975-6.949272 352.87077-251.770164 476.905714-390.347313 489.976404-547.938514l-0.013303-60.136635C1009.728972 170.201403 906.133545 85.971024 815.453267 77.127611c-15.761985-1.586125-31.210839-2.385327-46.047756-2.385327-110.648053 0-158.939919 47.679929-219.981157 120.42472l-37.426401 44.647873-37.437657-44.658106C413.561014 122.422214 365.28245 74.742285 254.521834 74.742285c-14.848173 0-30.274514 0.801249-45.870724 2.376117C117.816313 85.975117 14.231119 170.291454 0.346901 334.568938l0.00921 60.133565L0.350994 394.703527 0.350994 394.703527z"
                                                    Margin="1">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Click">
                                    <i:InvokeCommandAction Command="{Binding GetDefaultProfileCommand}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </emptybuttonex:cEmptyButton>
                        <!--其他设置-->
                        <configbuttonex:cConfigButton Width="28" Height="28"
                                                      BorderMouseOverColor="DimGray"
                                                      BorderPathData="M848 666.9a128 128 0 0 0-90.5-37.4 131.8 131.8 0 0 0-14.1 0.7L625.1 512l58.9-58.9a160 160 0 0 0 190.4-213l-81.1 81.1a64 64 0 0 1-90.5 0 64 64 0 0 1 0-90.5l81.1-81.1a160 160 0 0 0-213 190.4L512 398.9 453.1 340a160 160 0 0 0-213-190.4l81.1 81.1a64 64 0 0 1 0 90.5 64 64 0 0 1-90.5 0l-81.1-81.1a160 160 0 0 0 190.4 213l58.9 58.9-118.3 118.2a130.5 130.5 0 0 0-14.1-0.7 128 128 0 1 0 127.3 113.9L512 625.1l118.2 118.3A128 128 0 1 0 848 666.9zM306.1 797a56 56 0 1 1-39.5-95.5 55.9 55.9 0 0 1 39.5 95.5z m491 0a56 56 0 1 1-0.1-79.1 55.8 55.8 0 0 1 0.1 79.1z"
                                                      Margin="1" 
                                                      DisableContextMenu="False"
                                                      ChatGptApiKeys="{Binding ChatGptApiKeys, Mode=OneWay}"
                                                      BingGptCookies="{Binding BingGptCookies, Mode=OneWay}"
                                                      GeminiApiKeys="{Binding GeminiApiKeys, Mode=OneWay}"
                                                      AddChatGptApiKeyCommand="{Binding AddChatGptApiKeyCommand, Mode=OneWay}"
                                                      AddBingGptCookieCommand="{Binding AddBingGptCookieCommand, Mode=OneWay}"
                                                      AddGeminiApiKeyCommand="{Binding AddGeminiApiKeyCommand, Mode=OneWay}"
                                                      ContextMenuIsOpen ="False"
                                                      >
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Click">
                                    <i:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type configbuttonex:cConfigButton}}}"
                                                            PropertyName="ContextMenuIsOpen"
                                                            Value="True"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </configbuttonex:cConfigButton>
                        <!--Bing随机cookie开关-->
                        <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                    BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                    BorderPathData="M921.514667 472.064a42.922667 42.922667 0 0 0-36.437334-7.338667A125.44 125.44 0 0 1 853.333333 469.333333c-70.570667 0-128-57.429333-128.128-125.354666 0.213333-1.450667 0.682667-5.717333 0.725334-7.168a42.538667 42.538667 0 0 0-53.504-42.922667c-10.538667 2.986667-21.461333 4.565333-32.426667 4.778667-70.570667 0-128-57.429333-128-128 0-9.258667 1.322667-18.944 4.266667-30.549334a42.666667 42.666667 0 0 0-45.568-52.736A424.789333 424.789333 0 0 0 85.333333 512c0 235.264 191.402667 426.666667 426.666667 426.666667s426.666667-191.402667 426.666667-426.666667c0-2.090667-0.128-4.138667-0.298667-6.826667a42.88 42.88 0 0 0-16.853333-33.109333zM362.666667 256a64 64 0 1 1 0 128 64 64 0 0 1 0-128z m-85.333334 341.333333a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m128 170.666667a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m106.666667-277.333333a64 64 0 1 1 128 0 64 64 0 0 1-128 0z m149.333333 277.333333a64 64 0 1 1 0-128 64 64 0 0 1 0 128z"
                                                    Command="{Binding BingRandomCookieCommand.ClickCommand}"
                                                    LightOnOff="{Binding BingRandomCookieCommand.IsLightOn}"
                                                    ToolTip="Bing使用随机生成字符串作cookie"
                                                    Margin="1"
                                                    Visibility="Collapsed"/>
                        <!--BingNoSearchAll开关-->
                        <emptybuttonex:cEmptyButton Width="28" Height="28" IsEnabled="False" Visibility="Collapsed"
                                                    BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                    BorderPathData="M607.965631 383.962504v63.99375c0 13.198711-10.798945 23.997656-23.997657 23.997657H248.000784c-13.198711 0-23.997656-10.798945-23.997657-23.997657v-63.99375c0-13.198711 10.798945-23.997656 23.997657-23.997657h335.96719c13.198711 0 23.997656 10.798945 23.997657 23.997657z m401.960746 569.3444L953.331904 1009.901377c-18.798164 18.798164-49.195196 18.798164-67.79338 0L685.958014 810.520848c-8.999121-8.999121-13.998633-21.19793-13.998633-33.99668V743.927351c-70.593106 55.19461-159.384435 87.991407-255.975002 87.991407C186.206818 831.918758 0.025 645.73694 0.025 415.959379S186.206818 0 415.984379 0s415.959379 186.181818 415.959379 415.959379c0 96.590567-32.796797 185.381896-87.991407 255.975002h32.596817c12.79875 0 24.997559 4.999512 33.99668 13.998633l199.380529 199.38053c18.598184 18.798164 18.598184 49.195196 0 67.99336zM687.957819 415.959379c0-150.385314-121.588126-271.97344-271.97344-271.97344S144.010939 265.574065 144.010939 415.959379s121.588126 271.97344 271.97344 271.97344 271.97344-121.588126 271.97344-271.97344z"
                                                    Command="{Binding BingNoSearchAllCommand.ClickCommand}"
                                                    LightOnOff="{Binding BingNoSearchAllCommand.IsLightOn}"
                                                    ToolTip="Bing禁用搜索"
                                                    Margin="1"/>
                        <!--BingAutoSave开关-->
                        <emptybuttonex:cEmptyButton Width="28" Height="28" IsEnabled="False" Visibility="Collapsed"
                                                    BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                    BorderPathData="M1024 640.192C1024 782.912 919.872 896 787.648 896h-512C123.904 896 0 761.6 0 597.504 0 451.968 94.656 331.52 226.432 302.976 284.16 195.456 391.808 128 512 128c152.32 0 282.112 108.416 323.392 261.12C941.888 413.44 1024 519.04 1024 640.192z m-341.312-139.84L512 314.24 341.312 500.48h341.376z m-213.376 0v256h85.376v-256H469.312z"
                                                    Command="{Binding BingAutoSaveCommand.ClickCommand}"
                                                    LightOnOff="{Binding BingAutoSaveCommand.IsLightOn}"
                                                    ToolTip="Bing使用autosave参数以同步会话到官方网页端"
                                                    Margin="1"/>

                        <!--打开PEditor-->
                        <emptybuttonex:cEmptyButton Command="{Binding OpenPEditorCommand}"
                                                    Width="28" Height="28"
                                                    BorderMouseOverColor="DimGray"
                                                    BorderPathData="M0.986196 969.101766L89.250722 598.292135 647.108828 40.434029c25.31236-25.31236 59.500482-39.447833 95.167898-39.447833 35.667416 0 70.019904 14.135474 95.167897 39.447833l132.807704 132.807705c25.31236 25.31236 39.447833 59.500482 39.447834 95.167897 0 35.667416-14.135474 70.019904-39.447834 95.167897L412.394222 921.435634 41.420225 1009.700161c-11.341252 2.629856-23.339968-0.657464-31.558267-8.875763-8.218299-8.382665-11.669984-20.38138-8.875762-31.722632z m633.630818-54.405137h430.803211V1022.35634H634.617014v-107.659711z"
                                                    Margin="1">
                        </emptybuttonex:cEmptyButton>
                    </StackPanel>
                </Grid>

            </Border>


            <!--左中-->
            <Border Grid.Row="1"
                    BorderThickness="0,1,0,1">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="Transparent" Offset="0"/>
                        <GradientStop Color="Silver" Offset="0.5"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Border.BorderBrush>

                <listviewcontactsex:cListViewContacts ItemsSource="{Binding BotContacts}"
                                                      SelectedItem="{Binding SelectedContact}"
                                                      Background="Transparent"
                                                      BorderThickness="0"
                                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                      ScrollViewer.VerticalScrollBarVisibility="Auto">
                </listviewcontactsex:cListViewContacts>
            </Border>

            <!--左下-->
            <Border Grid.Row="2">
                <listviewcontactsex:cListViewContacts ItemsSource="{Binding PlayerContacts}"
                                                      Background="Transparent"
                                                      BorderThickness="0"
                                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                      ScrollViewer.VerticalScrollBarVisibility="Auto" VerticalAlignment="Center"/>
            </Border>
        </Grid>

        <!--右-->
        <Grid Grid.Column="1" Background="#444654">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="60"/>
                </Grid.RowDefinitions>

                <!--右上-->
                <Border Grid.Row="0" BorderBrush="#2a2b32" BorderThickness="0,0,0,1" >
                    <Grid HorizontalAlignment="Stretch"
                          Margin="4">

                        <!--Content="{Binding SelectedContact.Username, FallbackValue=@BotName}"-->
                        <Label Foreground="White"
                               FontWeight="Bold"
                               Margin="5,0,5,0"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               d:Content="@BotName">
                            <Label.Content>
                                <MultiBinding Converter="{StaticResource NekoChat_converter_selectedcontact_title}" FallbackValue="@BotName">
                                    <Binding Path="SelectedContact.DisplayName" Mode="OneWay"/>
                                    <Binding Path="SelectedContact.Messages.Count" Mode="OneWay"/>
                                </MultiBinding>
                            </Label.Content>
                        </Label>

                        <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Left">
                            <!--日志-->
                            <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M960 719.04a48 48 0 0 1 47.552 41.472l0.448 6.528v129.728a112 112 0 0 1-102.784 111.616l-9.216 0.384H128a112 112 0 0 1-111.616-102.848l-0.384-9.152v-129.728a48 48 0 0 1 95.552-6.528l0.448 6.528v129.728a16 16 0 0 0 12.352 15.552l3.648 0.448h768a16 16 0 0 0 15.552-12.352l0.448-3.648v-129.728a48 48 0 0 1 48-48zM567.488 256.192l6.976 1.536 1.28 0.64c15.744 10.112 25.728 28.544 26.88 49.536l-0.128 9.152-1.28 9.088-112 403.456c-10.24 32.96-31.872 46.912-53.312 33.088-15.808-10.176-25.792-28.608-26.88-49.6V704l1.28-9.152 112.256-404.096c9.088-23.424 26.56-36.608 44.928-34.56z m153.92 78.464l6.4 2.368 6.016 3.584 145.344 122.56 4.864 7.232c8.704 13.632 11.968 22.72 11.968 36.864 0 13.056-4.096 26.88-10.496 36.8l-4.096 5.44-3.456 3.2-144.448 121.408c-18.944 13.696-41.6 5.44-50.56-20.352-6.976-20.288-5.44-43.968 4.224-60.096l4.672-6.4 4.864-4.416 90.24-75.648-89.92-75.328c-14.208-10.24-20.48-32.64-17.792-54.784l1.408-8.32 2.368-8.064c6.976-20.288 22.592-29.952 38.4-26.048z m-380.416 26.048c7.04 20.288 5.504 44.032-4.16 60.096l-4.672 6.4-4.864 4.416-90.304 75.584 89.984 75.392c14.208 10.304 20.48 32.64 17.792 54.784l-1.408 8.32-2.368 8.064c-6.976 20.288-22.592 29.952-38.784 25.856l-6.08-2.176-5.952-3.584-145.408-122.56-4.8-7.232C131.264 530.432 128 521.344 128 507.264c0-13.12 4.096-26.88 10.496-36.864l4.096-5.44 3.456-3.2L290.56 340.352c18.944-13.696 41.6-5.44 50.56 20.352zM896 16.768a112 112 0 0 1 111.616 102.784l0.384 9.216v131.584a48 48 0 0 1-95.552 6.528l-0.448-6.528V128.768a16 16 0 0 0-12.352-15.552L896 112.768H128a16 16 0 0 0-15.552 12.352l-0.448 3.648v130.368a48 48 0 0 1-95.552 6.528L16 259.136V128.768A112 112 0 0 1 118.784 17.152L128 16.768h768z"
                                                        Command="{Binding LogAreaCommand.ClickCommand}"
                                                        LightOnOff="{Binding LogAreaCommand.IsLightOn}"
                                                        ToolTip="日志"
                                                        Margin="1">
                                <!--<i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:ChangePropertyAction TargetObject="{Binding DataContext,
                                                                                               RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}"
                                                                        PropertyName="LogVisibility"
                                                                        Value="Visible"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>-->
                            </emptybuttonex:cEmptyButton>
                            <!--临时绕过-->
                            <emptybuttonex:cEmptyButton Width="28" Height="28" IsEnabled="False" Visibility="Collapsed"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M512 64C264 64 64 264 64 512s200 448 448 448 448-200 448-448S760 64 512 64z m-16 636.8c-51.2 0-92.8-41.6-92.8-92.8 0-51.2 41.6-92.8 92.8-92.8s92.8 41.6 92.8 92.8c0 49.6-41.6 92.8-92.8 92.8z m296-48c-6.4 6.4-16 9.6-25.6 9.6-8 0-17.6-3.2-24-9.6-6.4-6.4-11.2-14.4-11.2-24s3.2-14.4 9.6-24l40-54.4H640v-9.6c0-73.6-64-132.8-144-132.8s-144 60.8-144 132.8v9.6H155.2c-19.2 0-35.2-14.4-35.2-33.6 0-19.2 16-33.6 35.2-33.6h137.6c27.2-84.8 110.4-144 204.8-144s177.6 59.2 204.8 144h80l-40-54.4c-6.4-8-11.2-14.4-11.2-24s3.2-17.6 9.6-24c14.4-12.8 35.2-12.8 49.6 0l100.8 112c6.4 6.4 9.6 14.4 9.6 24s-3.2 17.6-9.6 24l-99.2 112z"
                                                        Command="{Binding BingBypassDetectionCommand.ClickCommand}"
                                                        LightOnOff="{Binding BingBypassDetectionCommand.IsLightOn}"
                                                        ToolTip="临时绕过越狱检测"
                                                        Margin="1">
                            </emptybuttonex:cEmptyButton>
                            <!--占位置-->
                            <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M1016.452929 325.008051a563.029686 563.029686 0 0 1-552.102137 474.312222 408.956599 408.956599 0 0 1-80.701003-4.895699 247.31566 247.31566 0 0 1-205.677843-233.140565 240.162284 240.162284 0 0 1 480.256301-3.388954c1.009372 39.804368-16.237724 74.72279-51.682775 75.727285-37.863643 0-55.617863-27.014112-55.617864-63.429525v-101.181016a61.971544 61.971544 0 0 0-61.493676-62.025182H404.612545a147.641388 147.641388 0 1 0 109.056069 246.028345l2.969601-4.422708 2.964726 4.905451a104.443189 104.443189 0 0 0 89.063675 42.413131 117.721064 117.721064 0 0 0 109.056068-123.050744 320.200125 320.200125 0 0 0-8.7869-78.209268A299.651845 299.651845 0 0 0 116.483145 559.543208a303.406514 303.406514 0 0 0 295.711881 299.651845s22.215938 2.018744 47.260068 1.443353a639.542039 639.542039 0 0 0 342.967072-102.322045c1.453106-1.009372 2.906211 1.009372 1.940725 2.486859a503.413344 503.413344 0 0 1-392.158113 160.363377A353.875117 353.875117 0 0 1 52.029619 558.075474a366.216763 366.216763 0 0 1 147.105007-293.288413A358.702549 358.702549 0 0 1 410.746797 194.930713h113.839614a320.302525 320.302525 0 0 0 236.290586-104.321285 4.422708 4.422708 0 0 1 2.403963-1.37021 4.515355 4.515355 0 0 1 4.832308 2.106515 4.57387 4.57387 0 0 1 0.629029 2.71604 321.107097 321.107097 0 0 1-49.673783 143.642909 4.354441 4.354441 0 0 0-0.536382 2.462478 4.442212 4.442212 0 0 0 2.930593 3.827812 4.412955 4.412955 0 0 0 2.506363 0.131657 344.210502 344.210502 0 0 0 239.313826-197.3298 6.29029 6.29029 0 0 1 2.213792-2.130896 6.056232 6.056232 0 0 1 5.948956 0 6.212271 6.212271 0 0 1 2.208916 2.130896 436.224273 436.224273 0 0 1 42.793475 278.211222zM411.902454 467.748865a88.551675 88.551675 0 1 0 88.537046 88.537046V473.629554a6.382937 6.382937 0 0 0-6.061108-6.061108l-82.475938 0.180419z"
                                                        Command="{Binding BlazorServerCheckCommand.ClickCommand}"
                                                        LightOnOff="{Binding BlazorServerCheckCommand.IsLightOn}"
                                                        ToolTip="连接Blazor服务器，供手机从网页端操作"
                                                        Margin="1,1,10,1">
                            </emptybuttonex:cEmptyButton>


                            <!--清空聊天记录-->
                            <emptybuttonex:cEmptyButton Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M573.44 962.56s-5.12 0 0 0l-102.4-56.32v-5.12c10.24-20.48 97.28-204.8 87.04-199.68-10.24 10.24-71.68 76.8-117.76 143.36l-25.6 35.84s-102.4-71.68-138.24-112.64c20.48-30.72 133.12-174.08 133.12-174.08l-189.44 112.64c-10.24-10.24-71.68-76.8-92.16-112.64 15.36-15.36 117.76-102.4 117.76-102.4l-143.36 51.2-51.2-97.28v-5.12c25.6-5.12 235.52-46.08 332.8-117.76h10.24l291.84 291.84s5.12 5.12 0 10.24c-10.24 25.6-92.16 158.72-112.64 337.92zM952.32 163.84L768 348.16v5.12c40.96 71.68 40.96 153.6-20.48 215.04h-5.12L450.56 276.48v-5.12c61.44-61.44 143.36-61.44 215.04-20.48h5.12l184.32-184.32c25.6-25.6 71.68-25.6 97.28 0s25.6 71.68 0 97.28z"
                                                        ToolTip="清空"
                                                        Margin="1">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction Command="{Binding ClearCommand}"
                                                               CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </emptybuttonex:cEmptyButton>
                            <!--保存聊天记录截图-->
                            <emptybuttonex:cEmptyButton Command="{Binding SavePngCommand}"
                                                        Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M204.8 648.533333v-68.266666a34.133333 34.133333 0 0 0-68.266667 0v68.266666a34.133333 34.133333 0 0 0 68.266667 0zM341.333333 170.666667a34.133333 34.133333 0 0 0 34.133334 34.133333h68.266666a34.133333 34.133333 0 0 0 0-68.266667h-68.266666a34.133333 34.133333 0 0 0-34.133334 34.133334zM170.666667 477.866667a34.133333 34.133333 0 0 0 34.133333-34.133334v-68.266666a34.133333 34.133333 0 0 0-68.266667 0v68.266666a34.133333 34.133333 0 0 0 34.133334 34.133334zM785.066667 204.8h34.133333v34.133333a34.133333 34.133333 0 0 0 68.266667 0V204.8a68.266667 68.266667 0 0 0-68.266667-68.266667h-34.133333a34.133333 34.133333 0 0 0 0 68.266667zM546.133333 170.666667a34.133333 34.133333 0 0 0 34.133334 34.133333h68.266666a34.133333 34.133333 0 0 0 0-68.266667h-68.266666a34.133333 34.133333 0 0 0-34.133334 34.133334zM238.933333 819.2H204.8v-34.133333a34.133333 34.133333 0 0 0-68.266667 0v34.133333a68.266667 68.266667 0 0 0 68.266667 68.266667h34.133333a34.133333 34.133333 0 0 0 0-68.266667zM204.8 238.933333V204.8h34.133333a34.133333 34.133333 0 0 0 0-68.266667H204.8a68.266667 68.266667 0 0 0-68.266667 68.266667v34.133333a34.133333 34.133333 0 0 0 68.266667 0zM819.2 375.466667v68.3008a34.133333 34.133333 0 0 0 68.266667 0V375.466667a34.133333 34.133333 0 0 0-68.266667 0z
                                                                        M853.333333 546.133333h-60.2112a68.266667 68.266667 0 0 1-61.064533-37.751466l-5.8368-11.6736a34.133333 34.133333 0 0 0-30.5152-18.8416h-162.6112a34.065067 34.065067 0 0 0-30.5152 18.875733l-5.8368 11.6736A68.334933 68.334933 0 0 1 435.677867 546.133333H375.466667a34.133333 34.133333 0 0 0-34.133334 34.133334v273.066666a34.133333 34.133333 0 0 0 34.133334 34.133334h477.866666a34.133333 34.133333 0 0 0 34.133334-34.133334v-273.066666a34.133333 34.133333 0 0 0-34.133334-34.133334z m-238.933333 307.2a136.533333 136.533333 0 1 1 0-273.066666 136.533333 136.533333 0 0 1 0 273.066666z
                                                                        M614.4 716.8m-68.266667 0a68.266667 68.266667 0 1 0 136.533334 0 68.266667 68.266667 0 1 0-136.533334 0Z"
                                                        ToolTip="截图"
                                                        Margin="1">
                            </emptybuttonex:cEmptyButton>
                            <!--保存聊天记录文本-->
                            <emptybuttonex:cEmptyButton Command="{Binding SaveTxtCommand}"
                                                        Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M409.5 203.8h176a40 40 0 0 0 40-40v-96a4 4 0 0 0-4-4h-248a4 4 0 0 0-4 4v96a40 40 0 0 0 40 40z m135.5-102a32 32 0 1 1-32 32 32 32 0 0 1 32-32zM511 608a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z m329-330.4L681.8 64.3h-0.4c0.1 1.2 0.1 2.4 0.1 3.5v96a96 96 0 0 1-96 96h-176a96 96 0 0 1-96-96v-96c0-1.2 0-2.4 0.1-3.6h-97.7a40 40 0 0 0-39.9 40V920a40 40 0 0 0 40 40h592a40 40 0 0 0 40-40V301.6a39.8 39.8 0 0 0-8-24zM511 800a128 128 0 1 1 128-128 128 128 0 0 1-128 128z"
                                                        ToolTip="储存文本"
                                                        Margin="1">
                            </emptybuttonex:cEmptyButton>
                            <!--开启新一轮对话（强制开了，不再使用该按钮）-->
                            <!--<emptybuttonex:cEmptyButton Width="28" Height="28"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathData="M399.872 723.675429l33.865143-81.334858S460.8 567.881143 359.131429 581.485714L61.220571 655.872s-67.803429 20.333714-33.865142 74.532571L196.754286 1001.325714s54.125714 47.396571 81.261714-13.531428l33.865143-81.334857s555.446857 196.461714 670.573714-358.985143c0 6.802286-135.460571 331.922286-582.509714 176.128h-0.146286z m182.857143-419.986286l-40.594286 74.532571s-33.865143 74.459429 74.459429 60.928l298.057143-67.730285s67.730286-20.333714 40.594285-74.532572L792.722286 19.236571s-47.469714-47.469714-81.334857 6.729143l-33.792 81.334857s-548.644571-209.92-677.302858 338.651429c-6.802286 6.729143 135.387429-311.588571 582.436572-142.262857z"
                                                        Margin="1"
                                                        IsEnabled="{Binding DebugMode,Converter={StaticResource NekoChat_converter_chatmode_isenabled}}"
                                                        />-->

                        </StackPanel>

                        <StackPanel x:Name="temp_stackpanel"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Right">

                            <!--ChatMode.DebugMode-->
                            <radiobuttonex:cRadioButton Width="28" Height="28"
                                                        Command="{Binding ChatModeChangeCommand}"
                                                        CommandParameter ="0"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathColor="#858695"
                                                        BorderPathData="M64 329.472A128 128 0 0 1 141.504 211.84l320.128-137.472a128 128 0 0 1 101.12 0l319.744 137.472A128 128 0 0 1 960 329.472v363.968a128 128 0 0 1-77.248 117.504l-319.744 138.304a128 128 0 0 1-101.632 0l-320.128-138.24A128 128 0 0 1 64 693.376V329.472z m230.976 112.384c8.448 0 14.784-2.112 19.008-6.4a22.784 22.784 0 0 0 6.4-16.768 23.232 23.232 0 0 0-6.272-16.896c-4.224-4.288-10.56-6.4-19.2-6.4H181.888c-8.128 0-14.4 2.048-18.688 6.208a22.784 22.784 0 0 0-6.4 17.088c0 7.04 2.048 12.608 6.208 16.832 4.096 4.224 10.368 6.4 18.88 6.4h34.944v202.24c0 11.52 2.304 20.16 6.912 25.856 4.672 5.76 10.624 8.576 17.984 8.576a21.76 21.76 0 0 0 17.728-8.448c4.544-5.632 6.848-14.272 6.848-25.92V441.856h28.736z m175.488-3.008c7.872 0 13.76-1.984 17.6-6.016a21.888 21.888 0 0 0 5.76-15.808c0-6.464-1.92-11.712-5.76-15.68-3.84-4.032-9.728-6.016-17.6-6.016H369.792c-7.04 0-12.8 1.152-17.28 3.52a21.248 21.248 0 0 0-9.984 11.2 52.608 52.608 0 0 0-3.2 19.84v209.344c0 12.16 2.432 20.992 7.168 26.432 4.736 5.44 12.48 8.192 23.296 8.192H474.24c7.744 0 13.632-2.048 17.6-6.208a22.208 22.208 0 0 0 5.952-16 22.72 22.72 0 0 0-5.952-16.448c-3.968-4.16-9.856-6.208-17.6-6.208H388.992V549.76h72.576c7.68 0 13.376-1.92 17.024-5.952a21.952 21.952 0 0 0 5.568-15.488 21.12 21.12 0 0 0-5.632-15.296c-3.712-3.84-9.344-5.76-16.96-5.76H388.992v-68.48h81.472z m364.864 3.008c8.448 0 14.848-2.112 19.072-6.4a22.784 22.784 0 0 0 6.336-16.768 23.232 23.232 0 0 0-6.272-16.896c-4.16-4.288-10.56-6.4-19.136-6.4h-113.152c-8.128 0-14.336 2.048-18.624 6.208a22.784 22.784 0 0 0-6.4 17.088c0 7.04 2.048 12.608 6.144 16.832s10.432 6.4 18.88 6.4h35.008v129.92c0 11.52 2.304 20.096 6.912 25.792 4.608 5.76 10.624 8.576 17.92 8.576a21.76 21.76 0 0 0 17.728-8.448c4.608-5.632 6.848-14.272 6.848-25.92v-129.92h28.8zM688 590.272c0-14.08-1.92-25.984-5.952-35.648a64.384 64.384 0 0 0-16.704-24 97.28 97.28 0 0 0-25.92-16.192 287.552 287.552 0 0 0-34.048-12.16 461.952 461.952 0 0 1-21.568-7.232 61.056 61.056 0 0 1-12.864-6.784 33.6 33.6 0 0 1-10.048-10.496 27.52 27.52 0 0 1-3.648-14.4c0-8.96 3.584-16.64 10.688-23.04 7.168-6.4 16.512-9.6 28.16-9.6 12.544 0 21.632 2.88 27.328 8.768 5.632 5.888 10.496 14.08 14.528 24.64 3.2 7.296 6.08 12.608 8.704 15.872 2.688 3.2 6.656 4.8 11.776 4.8 5.696 0 10.368-2.688 14.208-8.064a30.72 30.72 0 0 0 5.696-18.112 61.632 61.632 0 0 0-4.608-22.656 72.064 72.064 0 0 0-39.232-39.04c-9.92-4.224-21.76-6.4-35.392-6.4-17.088 0-31.936 3.2-44.544 9.6-12.672 6.4-22.336 15.616-28.992 27.52a82.112 82.112 0 0 0-10.048 40.832c0 16.064 3.2 29.504 9.536 40.32 6.272 10.88 14.848 19.392 25.6 25.664 10.752 6.272 24.128 11.776 40.128 16.448 11.904 3.456 21.44 6.656 28.608 9.728a43.136 43.136 0 0 1 17.408 13.184c4.48 5.76 6.784 13.248 6.784 22.528a38.272 38.272 0 0 1-12.544 29.12 45.76 45.76 0 0 1-32.512 11.712 42.688 42.688 0 0 1-23.488-5.76 40.96 40.96 0 0 1-13.888-14.72 125.312 125.312 0 0 1-9.216-22.272 47.488 47.488 0 0 0-8.384-16.896 15.36 15.36 0 0 0-12.096-5.76 17.6 17.6 0 0 0-14.464 7.36 27.776 27.776 0 0 0-5.696 17.6c0 11.776 3.2 23.872 9.472 36.352 6.336 12.48 14.528 22.4 24.64 29.888 14.272 10.432 32.384 15.616 54.336 15.616 18.304 0 34.112-3.84 47.488-11.392 13.312-7.616 23.488-18.112 30.4-31.552 6.912-13.44 10.368-28.544 10.368-45.44z m94.336 89.92a25.6 25.6 0 1 0 0-51.2 25.6 25.6 0 0 0 0 51.2z"
                                                        IsChecked="True"
                                                        Margin="1"/>
                            <!--ChatMode.ChatGPT-->
                            <radiobuttonex:cRadioButton Width="28" Height="28" IsEnabled="False" 
                                                        Command="{Binding ChatModeChangeCommand}"
                                                        CommandParameter ="1"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathColor="#858695"
                                                        BorderPathData="M900.928 430.72a220.8 220.8 0 0 0-19.392-183.36 229.44 229.44 0 0 0-198.4-113.28c-16.192 0-32.32 1.6-48.064 4.992a226.112 226.112 0 0 0-76.48-55.424A228.8 228.8 0 0 0 465.92 64h-1.984c-99.2 0-187.2 63.168-217.664 156.288-31.616 6.4-61.44 19.328-87.488 38.016a224.32 224.32 0 0 0-63.808 70.272 223.616 223.616 0 0 0 28.16 264.704 220.608 220.608 0 0 0 19.392 183.36A227.84 227.84 0 0 0 247.808 870.4a231.744 231.744 0 0 0 141.12 14.528c21.184 23.616 47.296 42.496 76.416 55.424 29.184 12.928 60.8 19.648 92.8 19.648h2.048a228.48 228.48 0 0 0 217.664-156.416c31.616-6.4 61.44-19.328 87.488-38.016 26.112-18.624 47.872-42.624 63.808-70.272a223.232 223.232 0 0 0-28.16-264.576z m-341.312 470.72H559.36c-39.68 0-78.144-13.76-108.672-38.912a134.4 134.4 0 0 0 5.376-2.944l180.8-103.04a29.248 29.248 0 0 0 14.848-25.216V479.616l76.416 43.52a2.688 2.688 0 0 1 1.472 2.112v208.256c-0.064 92.608-76.16 167.68-169.984 167.936zM193.92 747.328a165.824 165.824 0 0 1-20.288-112.512l5.376 3.2 180.8 103.04a29.76 29.76 0 0 0 29.696 0l220.8-125.76v87.232a2.688 2.688 0 0 1-1.152 2.112l-182.784 104.128a172.288 172.288 0 0 1-170.112 0 169.344 169.344 0 0 1-62.336-61.44z m-47.552-389.44c19.84-34.048 51.2-60.16 88.576-73.6l-0.128 6.144V496.64a28.736 28.736 0 0 0 14.848 25.152l220.8 125.76-76.48 43.52a2.752 2.752 0 0 1-2.56 0.256L208.704 587.136a169.28 169.28 0 0 1-62.208-61.44 166.4 166.4 0 0 1-0.064-167.808z m627.84 144.128L553.6 376.32l76.48-43.52a2.752 2.752 0 0 1 2.56-0.192l182.784 104.128c25.856 14.72 47.36 35.904 62.272 61.44 14.912 25.6 22.784 54.528 22.784 83.968 0 70.4-44.48 133.312-111.36 157.568V527.424v-0.256a28.672 28.672 0 0 0-14.72-25.152z m76.16-112.96a245.76 245.76 0 0 0-5.44-3.136l-180.8-103.04a29.824 29.824 0 0 0-29.696 0l-220.8 125.76V321.408c0-0.832 0.448-1.664 1.152-2.176l182.784-104c25.856-14.72 55.168-22.464 84.992-22.464 94.016 0 170.24 75.2 170.24 167.936 0 9.472-0.832 19.008-2.496 28.352zM372.16 544.32l-76.48-43.52a2.688 2.688 0 0 1-1.472-2.112V290.368c0-92.672 76.224-167.808 170.24-167.808 39.68 0 78.272 13.76 108.8 38.912a158.528 158.528 0 0 0-5.312 3.008L387.2 267.52a29.184 29.184 0 0 0-14.848 25.216v0.128l-0.128 251.456z m41.472-88.32L512 399.936l98.368 56v112L512 624l-98.304-56v-112z"
                                                        Margin="1"/>
                            <!--ChatMode.NewBing-->
                            <radiobuttonex:cRadioButton Width="28" Height="28" IsEnabled="False"
                                                        Command="{Binding ChatModeChangeCommand}"
                                                        CommandParameter ="2"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathColor="#858695"
                                                        BorderPathData="M213.333333 770.986667 626.346667 546.986667 512 491.946667 442.453333 332.8 810.666667 452.266667 810.666667 631.466667 382.72 890.453333 213.333333 770.986667 213.333333 133.546667 384 192 384 618.666667 213.333333 770.986667Z"
                                                        Margin="1"/>

                            <!--ChatMode.Gemini-->
                            <radiobuttonex:cRadioButton Width="28" Height="28"
                                                        Command="{Binding ChatModeChangeCommand}"
                                                        CommandParameter ="3"
                                                        BorderMouseOverColor="{Binding SelectedContact.UserborderColor}"
                                                        BorderPathColor="#858695"
                                                        BorderPathData="M16 8.016A8.522 8.522 0 008.016 16h-.032A8.521 8.521 0 000 8.016v-.032A8.521 8.521 0 007.984 0h.032A8.522 8.522 0 0016 7.984v.032z"
                                                        Margin="1"/>
                        </StackPanel>


                    </Grid>
                </Border>

                <!--右中-->
                <Border Grid.Row="1">
                    <Grid>
                        <ContentControl Content="{Binding SelectedContact.InnerListView}" Grid.Column="0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Drop">
                                    <i:InvokeCommandAction Command="{Binding LoadBingChatHistoryCommand}"
                                                                   PassEventArgsToCommand="True"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ContentControl>

                        <consolelistviewex:cConsoleListView MaxHeight="192" d:Background="#16161B"
                                                            MinHeight="128"
                                                            VerticalAlignment="Top"
                                                            AlternationCount="2"
                                                            ItemsSource="{Binding LogContentReversed, Mode=OneWay, Delay=1000}"
                                                            Visibility="{Binding LogAreaCommand.IsLightOn,
                                                                                 Converter={StaticResource BooleanToVisibilityConverter}}"
                                                            Background="#202123"
                                                            d:Visibility="Visible"
                                                            />

                        <alertpanelex:cAlertPanel SystemMessages="{Binding SystemMessages}"/>
                    </Grid>
                </Border>

                <!--右下-->
                <Grid Grid.Row="2" Background="#343540"
                      Margin="0,-1,0,0">

                    <!--Bing额外控件-->
                    <Menu HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          Background="Transparent"
                          Margin="1,1,0,0"
                          Visibility="{Binding BingAdditionalContent}"
                          d:Visibility="Visible">
                        <Menu.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </Menu.ItemsPanel>

                        <suggestionmenuitemex:cSuggestionMenuItem Header="sug"                                                                       
                                                                  IsCheckable="True"                                                                      
                                                                  Focusable="False"                                                                     
                                                                  BackgroundColor="#202020"                                                                      
                                                                  SelectSuggestionCommand="{Binding SelectSuggestionCommand, Mode=OneWay}"
                                                                  Content="{Binding SelectedContact.Suggestion}"
                                                                  />
                        <suggestionmenuitemex:cSuggestionMenuItem Header="img"                                                                       
                                                                  IsCheckable="True"                                                                      
                                                                  Focusable="False"                                                                      
                                                                  BackgroundColor="#202020"                                                                      
                                                                  Command="{Binding SelectedContact.BingVisualSearchCommand, Mode=OneWay}"
                                                                  LightOnOff="{Binding SelectedContact.UseBingVisualSearch}"
                                                                  ToolTip="{Binding SelectedContact.BingVisualSearchImageUrl, Mode=OneWay}"
                                                                  Margin="2,0,0,0"
                                                                  />
                    </Menu>
                </Grid>
            </Grid>

            <!--输入框放这里以自由变化尺寸-->
            <inputboxex:cInputBox Text="Messaage @Username" MinHeight="36"
                                  Margin="12,0,0,12" VerticalAlignment="Bottom"/>
            <!--进度条意思意思-->
            <stepprogressindicatorex:cStepProgressIndicator Height="10"
                                                            Margin="17,0,0,1" 
                                                            HorizontalAlignment="Left" 
                                                            VerticalAlignment="Bottom"
                                                            MaxStep="6"
                                                            CurrentStep="{Binding SelectedContact.Step, Mode=OneWay}"
                                                            d:MaxStep="6" d:CurrentStep="3"/>
        </Grid>

        <!--ResizerIcon-->
        <!--<Border HorizontalAlignment="Right" 
                VerticalAlignment="Bottom"
                Grid.ColumnSpan="2"
                Margin="0,0,2,2">
            <Path Data="M861.390505 510.00353m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z
                        M861.390505 821.460074m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z
                        M517.989411 821.460074m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z
                        M517.989411 510.00353m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z
                        M861.390505 202.539926m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z
                        M162.609495 821.460074m-95.832625 0a93.65 93.65 0 1 0 191.665251 0 93.65 93.65 0 1 0-191.665251 0Z"
                  Fill="White"
                  Stretch="Fill" 
                  Width="8"
                  Height="{Binding Width, RelativeSource={RelativeSource Self}}"
                  d:Visibility="Visible">
                <i:Interaction.Triggers>
                    <i:DataTrigger Binding="{Binding ShowResizer, 
                                                     RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
                                           Value="False">
                        <i:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Path}}"
                                                        PropertyName="Visibility"
                                                        Value="Hidden"/>
                    </i:DataTrigger>
                </i:Interaction.Triggers>
            </Path>
        </Border>-->
    </Grid>
</UserControl>
